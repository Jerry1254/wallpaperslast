(()=>{var e={};e.id=7790,e.ids=[7790],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},41790:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page-experimental.runtime.prod.js")},67136:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c});var s=t(67096),r=t(16132),l=t(37284),n=t.n(l),i=t(32564),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(a,o);let c=["",{children:["share",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,71205)),"/Users/kele/Desktop/aicode/wallpaper-admin-last/app/share/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,35345)),"/Users/kele/Desktop/aicode/wallpaper-admin-last/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/kele/Desktop/aicode/wallpaper-admin-last/app/share/[id]/page.tsx"],p="/share/[id]/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/share/[id]/page",pathname:"/share/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},33024:(e,a,t)=>{Promise.resolve().then(t.bind(t,63493))},63493:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>SharePage});var s=t(30784),r=t(9885),l=t(52451),n=t.n(l),i=t(95555),o=t(12025),c=t(85574),d=t(99098),p=t(24874),u=t(35803);function SharePage({params:e}){let[a,t]=(0,r.useState)(null),[l,m]=(0,r.useState)(!0),[x,h]=(0,r.useState)(null),[g,v]=(0,r.useState)(!1),[f,j]=(0,r.useState)(0),{toast:_}=(0,o.pm)();(0,r.useEffect)(()=>{fetchSharePage()},[]);let fetchSharePage=async()=>{try{m(!0),h(null);let a=await fetch(`/api/share?id=${e.id}`),s=await a.json();0===s.code?t(s.data):(h(s.message||"获取分享页失败"),_({variant:"destructive",description:s.message||"获取分享页失败"}))}catch(e){console.error("Error fetching share page:",e),h("获取分享页失败"),_({variant:"destructive",description:"获取分享页失败"})}finally{m(!1)}},handleDownloadSingle=e=>{let a=document.createElement("a");a.href=e.url,a.download=e.name,document.body.appendChild(a),a.click(),document.body.removeChild(a)};return l?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"text-center",children:"加载中..."})}):x?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"text-center text-red-500",children:x})}):a?(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:a.wallpaperName}),s.jsx("div",{className:"mb-6",children:(0,u.ZP)(a.description)}),(0,s.jsxs)(i.z,{className:"mb-8 w-full",size:"lg",onClick:()=>{a?.files&&(a.files.forEach((e,a)=>{let t=document.createElement("a");t.href=e.url,t.download=e.name,document.body.appendChild(t),setTimeout(()=>{t.click(),document.body.removeChild(t)},500*a)}),_({description:`开始下载 ${a.files.length} 个文件`}))},children:[s.jsx(c.Z,{className:"mr-2 h-5 w-5"}),"下载全部"]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:a.files.map((e,t)=>(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("div",{className:"relative aspect-[9/16] w-full overflow-hidden rounded-lg cursor-pointer",onClick:()=>{j(t),v(!0)},children:"video/mp4"===e.type?s.jsx(d.F,{src:e.url,className:"h-full w-full object-cover"}):s.jsx(n(),{src:e.url,alt:e.name,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm truncate",children:e.name}),s.jsx(i.z,{variant:"outline",className:"w-full",onClick:()=>handleDownloadSingle(e),children:a.buttonText||"点击下载单张壁纸"})]})]},e.id))}),s.jsx(p.e,{images:a?.files.map(e=>({url:e.url,type:e.type}))||[],initialIndex:f,open:g,onOpenChange:v})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"text-center",children:"分享页不存在"})})}},71205:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>n,__esModule:()=>l,default:()=>o});var s=t(95153);let r=(0,s.createProxy)(String.raw`/Users/kele/Desktop/aicode/wallpaper-admin-last/app/share/[id]/page.tsx`),{__esModule:l,$$typeof:n}=r,i=r.default,o=i}};var a=require("../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[6214,6426,3979,968,2451,9071,456,5803,4333,5555,2025,516,9098,4874],()=>__webpack_exec__(67136));module.exports=t})();