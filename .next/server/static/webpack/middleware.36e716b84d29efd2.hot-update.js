"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\nfunction middleware(request) {\n    // 获取当前路径\n    const path = request.nextUrl.pathname;\n    // 定义需要保护的路径\n    const protectedPaths = [\n        \"/dashboard\",\n        \"/wallpapers\",\n        \"/users\"\n    ];\n    // 定义公开路径\n    const publicPaths = [\n        \"/login\"\n    ];\n    // 检查是否是受保护的路径\n    const isProtectedPath = protectedPaths.some((pp)=>path.startsWith(pp));\n    // 检查是否是公开路径\n    const isPublicPath = publicPaths.some((pp)=>path.startsWith(pp));\n    // 获取认证状态\n    const authToken = request.cookies.get(\"auth_token\")?.value;\n    const isAuthenticated = !!authToken;\n    // 如果用户已登录且访问登录页，重定向到仪表盘\n    if (isAuthenticated && isPublicPath) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/dashboard\", request.url));\n    }\n    // 如果用户未登录且访问受保护的路径，重定向到登录页\n    if (!isAuthenticated && isProtectedPath) {\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/login\", request.url));\n        response.cookies.delete(\"auth_token\");\n        return response;\n    }\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\n// 配置需要运行中间件的路径\nconst config = {\n    matcher: [\n        \"/((?!api|_next/static|_next/image|favicon.ico).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMEM7QUFHbkMsU0FBU0MsV0FBV0MsT0FBb0I7SUFDN0MsU0FBUztJQUNULE1BQU1DLE9BQU9ELFFBQVFFLE9BQU8sQ0FBQ0MsUUFBUTtJQUVyQyxZQUFZO0lBQ1osTUFBTUMsaUJBQWlCO1FBQUM7UUFBYztRQUFlO0tBQVM7SUFFOUQsU0FBUztJQUNULE1BQU1DLGNBQWM7UUFBQztLQUFTO0lBRTlCLGNBQWM7SUFDZCxNQUFNQyxrQkFBa0JGLGVBQWVHLElBQUksQ0FBQ0MsQ0FBQUEsS0FBTVAsS0FBS1EsVUFBVSxDQUFDRDtJQUVsRSxZQUFZO0lBQ1osTUFBTUUsZUFBZUwsWUFBWUUsSUFBSSxDQUFDQyxDQUFBQSxLQUFNUCxLQUFLUSxVQUFVLENBQUNEO0lBRTVELFNBQVM7SUFDVCxNQUFNRyxZQUFZWCxRQUFRWSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxlQUFlQztJQUNyRCxNQUFNQyxrQkFBa0IsQ0FBQyxDQUFDSjtJQUUxQix3QkFBd0I7SUFDeEIsSUFBSUksbUJBQW1CTCxjQUFjO1FBQ25DLE9BQU9aLHFEQUFZQSxDQUFDa0IsUUFBUSxDQUFDLElBQUlDLElBQUksY0FBY2pCLFFBQVFrQixHQUFHO0lBQ2hFO0lBRUEsMkJBQTJCO0lBQzNCLElBQUksQ0FBQ0gsbUJBQW1CVCxpQkFBaUI7UUFDdkMsTUFBTWEsV0FBV3JCLHFEQUFZQSxDQUFDa0IsUUFBUSxDQUFDLElBQUlDLElBQUksVUFBVWpCLFFBQVFrQixHQUFHO1FBQ3BFQyxTQUFTUCxPQUFPLENBQUNRLE1BQU0sQ0FBQztRQUN4QixPQUFPRDtJQUNUO0lBRUEsT0FBT3JCLHFEQUFZQSxDQUFDdUIsSUFBSTtBQUMxQjtBQUVBLGVBQWU7QUFDUixNQUFNQyxTQUFTO0lBQ3BCQyxTQUFTO1FBQUM7S0FBb0Q7QUFDaEUsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9taWRkbGV3YXJlLnRzPzQyMmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgdHlwZSB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5cbmV4cG9ydCBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIC8vIOiOt+WPluW9k+WJjei3r+W+hFxuICBjb25zdCBwYXRoID0gcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lXG5cbiAgLy8g5a6a5LmJ6ZyA6KaB5L+d5oqk55qE6Lev5b6EXG4gIGNvbnN0IHByb3RlY3RlZFBhdGhzID0gWycvZGFzaGJvYXJkJywgJy93YWxscGFwZXJzJywgJy91c2VycyddXG4gIFxuICAvLyDlrprkuYnlhazlvIDot6/lvoRcbiAgY29uc3QgcHVibGljUGF0aHMgPSBbJy9sb2dpbiddXG5cbiAgLy8g5qOA5p+l5piv5ZCm5piv5Y+X5L+d5oqk55qE6Lev5b6EXG4gIGNvbnN0IGlzUHJvdGVjdGVkUGF0aCA9IHByb3RlY3RlZFBhdGhzLnNvbWUocHAgPT4gcGF0aC5zdGFydHNXaXRoKHBwKSlcbiAgXG4gIC8vIOajgOafpeaYr+WQpuaYr+WFrOW8gOi3r+W+hFxuICBjb25zdCBpc1B1YmxpY1BhdGggPSBwdWJsaWNQYXRocy5zb21lKHBwID0+IHBhdGguc3RhcnRzV2l0aChwcCkpXG5cbiAgLy8g6I635Y+W6K6k6K+B54q25oCBXG4gIGNvbnN0IGF1dGhUb2tlbiA9IHJlcXVlc3QuY29va2llcy5nZXQoJ2F1dGhfdG9rZW4nKT8udmFsdWVcbiAgY29uc3QgaXNBdXRoZW50aWNhdGVkID0gISFhdXRoVG9rZW5cblxuICAvLyDlpoLmnpznlKjmiLflt7LnmbvlvZXkuJTorr/pl67nmbvlvZXpobXvvIzph43lrprlkJHliLDku6rooajnm5hcbiAgaWYgKGlzQXV0aGVudGljYXRlZCAmJiBpc1B1YmxpY1BhdGgpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9kYXNoYm9hcmQnLCByZXF1ZXN0LnVybCkpXG4gIH1cblxuICAvLyDlpoLmnpznlKjmiLfmnKrnmbvlvZXkuJTorr/pl67lj5fkv53miqTnmoTot6/lvoTvvIzph43lrprlkJHliLDnmbvlvZXpobVcbiAgaWYgKCFpc0F1dGhlbnRpY2F0ZWQgJiYgaXNQcm90ZWN0ZWRQYXRoKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnL2xvZ2luJywgcmVxdWVzdC51cmwpKVxuICAgIHJlc3BvbnNlLmNvb2tpZXMuZGVsZXRlKCdhdXRoX3Rva2VuJylcbiAgICByZXR1cm4gcmVzcG9uc2VcbiAgfVxuXG4gIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpXG59XG5cbi8vIOmFjee9rumcgOimgei/kOihjOS4remXtOS7tueahOi3r+W+hFxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgbWF0Y2hlcjogWycvKCg/IWFwaXxfbmV4dC9zdGF0aWN8X25leHQvaW1hZ2V8ZmF2aWNvbi5pY28pLiopJ10sXG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJwYXRoIiwibmV4dFVybCIsInBhdGhuYW1lIiwicHJvdGVjdGVkUGF0aHMiLCJwdWJsaWNQYXRocyIsImlzUHJvdGVjdGVkUGF0aCIsInNvbWUiLCJwcCIsInN0YXJ0c1dpdGgiLCJpc1B1YmxpY1BhdGgiLCJhdXRoVG9rZW4iLCJjb29raWVzIiwiZ2V0IiwidmFsdWUiLCJpc0F1dGhlbnRpY2F0ZWQiLCJyZWRpcmVjdCIsIlVSTCIsInVybCIsInJlc3BvbnNlIiwiZGVsZXRlIiwibmV4dCIsImNvbmZpZyIsIm1hdGNoZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});