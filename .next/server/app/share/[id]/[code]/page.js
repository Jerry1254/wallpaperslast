(()=>{var e={};e.id=5642,e.ids=[5642],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},41790:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page-experimental.runtime.prod.js")},32712:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>c});var s=a(67096),r=a(16132),n=a(37284),l=a.n(n),i=a(32564),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let c=["",{children:["share",{children:["[id]",{children:["[code]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,55683)),"/Users/kele/Desktop/aicode/wallpaper-admin-last/app/share/[id]/[code]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,35345)),"/Users/kele/Desktop/aicode/wallpaper-admin-last/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/kele/Desktop/aicode/wallpaper-admin-last/app/share/[id]/[code]/page.tsx"],p="/share/[id]/[code]/page",u={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/share/[id]/[code]/page",pathname:"/share/[id]/[code]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},16063:(e,t,a)=>{Promise.resolve().then(a.bind(a,76564))},76564:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>SharePage});var s=a(30784),r=a(9885),n=a(52451),l=a.n(n),i=a(95555),o=a(12025),c=a(85574),d=a(99098),p=a(35803);function SharePage({params:e}){let[t,a]=(0,r.useState)(null),[n,u]=(0,r.useState)(!0),[m,x]=(0,r.useState)(null),{toast:h}=(0,o.pm)();(0,r.useEffect)(()=>{fetchSharePage()},[]);let fetchSharePage=async()=>{try{u(!0),x(null),console.log("Fetching share page for code:",e.code);let t=await fetch(`/api/share?id=${e.code}`),s=await t.json();console.log("API response:",s),0===s.code?a(s.data):(x(s.message||"获取分享页失败"),h({variant:"destructive",description:s.message||"获取分享页失败"}))}catch(e){console.error("Error fetching share page:",e),x("获取分享页失败"),h({variant:"destructive",description:"获取分享页失败"})}finally{u(!1)}},handleDownloadSingle=e=>{let t=document.createElement("a");t.href=e.url,t.download=e.name,document.body.appendChild(t),t.click(),document.body.removeChild(t)};return n?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"text-center",children:"加载中..."})}):m?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"text-center text-red-500",children:m})}):t?(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:(0,p.ZP)(t.wallpaperName)}),s.jsx("div",{className:"mb-6",children:(0,p.ZP)(t.description)}),(0,s.jsxs)(i.z,{className:"mb-8 w-full",size:"lg",onClick:()=>{t?.files&&(t.files.forEach((e,t)=>{let a=document.createElement("a");a.href=e.url,a.download=e.name,document.body.appendChild(a),setTimeout(()=>{a.click(),document.body.removeChild(a)},500*t)}),h({description:`开始下载 ${t.files.length} 个文件`}))},children:[s.jsx(c.Z,{className:"mr-2 h-5 w-5"}),(0,p.ZP)(t.buttonText)]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.files.map(e=>(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("div",{className:"relative aspect-[9/16] w-full overflow-hidden rounded-lg",children:"video/mp4"===e.type?s.jsx(d.F,{src:e.url,className:"h-full w-full object-cover"}):s.jsx(l(),{src:e.url,alt:e.name,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm truncate flex-1",children:(0,p.ZP)(e.name)}),s.jsx(i.z,{variant:"outline",size:"icon",onClick:()=>handleDownloadSingle(e),children:s.jsx(c.Z,{className:"h-4 w-4"})})]})]},e.id))})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"text-center",children:"分享页不存在"})})}},55683:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>o});var s=a(95153);let r=(0,s.createProxy)(String.raw`/Users/kele/Desktop/aicode/wallpaper-admin-last/app/share/[id]/[code]/page.tsx`),{__esModule:n,$$typeof:l}=r,i=r.default,o=i},10713:(e,t,a)=>{"use strict";e.exports=a(10316).vendored.contexts.RouterContext}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[6214,6426,2451,456,5803,4333,5555,2025,9098],()=>__webpack_exec__(32712));module.exports=a})();